services:
  docs:
    container_name: manon-docs
    image: manon-docs
    build:
      context: .
      dockerfile: ./docs/Dockerfile
    ports:
      - "5173:5173"

  visreg-test:
    container_name: manon-visreg
    image: manon-visreg
    build:
      context: ./visreg
    command: ["npm", "run", "test"]
    ports:
      - "3000:3000"
    volumes:
      - ./visreg/snapshots:/app/snapshots
    depends_on:
      - docs

  visreg-report:
    container_name: manon-visreg-report
    extends: visreg-test
    command: ["npm", "run", "report"]

  visreg-update:
    container_name: manon-visreg-update
    extends: visreg-test
    command: ["npm", "run", "update"]

  visreg-clean:
    container_name: manon-visreg-clean
    extends: visreg-test
    command: ["npm", "run", "clean"]
